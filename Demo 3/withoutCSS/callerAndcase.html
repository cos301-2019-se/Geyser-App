<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-firestore.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
   
 
  <style> 
input[type=text] {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  box-sizing: border-box;
}
</style>
  
<script>
   function genDate()
  {
     var today = new Date();
      var date = today.getFullYear()+'-'+(today.getMonth()+1)+'-'+today.getDate();
      document.getElementById("textbox12").value = date; 
  }
  
  function send()
  {
            var emptyArray = []; // create an empty array
           
            
            var lines = $('#comment').val().split('\n');
            for(var i = 0;i < lines.length;i++)
            {
                  var str = lines[i]; 
 				          var index = str.search("=");
  				         var res = str.slice(index+1, str.length);
                  emptyArray[i] = res
			      }
            document.getElementById("textbox2").value = emptyArray[0];
            document.getElementById("textbox3").value = emptyArray[1];
			document.getElementById("textbox4").value = emptyArray[2];
            document.getElementById("textbox5").value = emptyArray[3];
			document.getElementById("textbox6").value = emptyArray[4];
            document.getElementById("textbox7").value = emptyArray[5];
			document.getElementById("textbox8").value = emptyArray[6];
            document.getElementById("textbox9").value = emptyArray[7];
  }
  
  function genCase()
      {
        var text = "";
        var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
           for(var i = 0; i < 8; i++) 
          {
             text += possible.charAt(Math.floor(Math.random() * possible.length));
           }
        document.getElementById("textbox10").value = text;
          
      }
      
  function genCallerID()
      {
        var text = "";
        var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
           for(var i = 0; i < 8; i++) 
          {
             text += possible.charAt(Math.floor(Math.random() * possible.length));
           }
        document.getElementById("textbox11").value = text;
          
      }
</script>
</head>
<body>
  <h1><center><bold> Caller Identification</center></h1>
    <p><strong>Note:</strong> Paste the client details below </p>
    <textarea id="comment" rows="20" cols="100"></textarea>
    <p><button type="button" onclick = send()>Auto fill</button></p>
    

  
  
     
 
    <label>Name</label>
    <input type="text" name="textbox2" id="textbox2" />
  
    <label>Surname</label>
    <input type="text" name="textbox3" id="textbox3" />
  
    <label>Address</label>
    <input type="text" name="textbox4" id="textbox4" />
    
    <label>Cell Number</label>
    <input type="text" name="textbox5" id="textbox5" />
  
    <label>Call back number</label>
    <input type="text" name="textbox6" id="textbox6" />
  
     <label>Client Type</label>
    <input type="text" name="textbox7" id="textbox7" />
  
     <label>Service Type</label>
    <input type="text" name="textbox8" id="textbox8" />
   
    <label>Reason</label>
    <input type="text" name="textbox9" id="textbox9" />
     

    
    
 
  <h2><center><bold> Generating Case Report </center></h2>
 
 
    <label >Case ID </label>
    <input type="text" name="textbox10" id="textbox10" />
    <p><button type="button" onclick = genCase()>Generate Case ID</button></p>
   
   <label>Caller ID</label>
    <input type="text" name="textbox11" id="textbox11" />
   <p><button type="button" onclick = genCallerID()>Generate Caller ID</button></p>
   
    <label>Incident Date</label>
    <input type="text" name="textbox12" id="textbox12" />
  <p><button type="button" onclick = genDate()>Get current date</button></p>
  
     <label>Case Description</label>
    <input type="text" name="textbox16" id="textbox16" />
   
    <label>Case Status</label>
    <input type="text" name="textbox17" id="textbox17" value = "pending" />
   
   <label>Plumber ID</label>
    <input type="text" name="textbox18" list="exampleList1" id = "textbox18">
		<datalist id="exampleList1">
			<option value="24DbXsyVhZ">  
			<option value="24DhAjwRbi">
			<option value="24N8gqUbzf">
			<option value="24iYRIBgrd">
			<option value="24jjZdgHIF">
			
	    </datalist>
   
   <label>Case Opened by (Agent ID)</label>
	<input type="text" name="textbox19" list="exampleList" id = "textbox19">
		<datalist id="exampleList">
			<option value="ARvCV6mlk">  
			<option value="AXJXoxUcT">
			<option value="AmYRVePKB">
			<option value="AqFqK4rxM">
			<option value="Av5cwg13a">
			
	    </datalist>
	
   

 <button type="submit" onclick = "storeData()">Submit</button>

 
 <script>
 var firebaseConfig = {
    apiKey: "AIzaSyDibg-oYRpVXU9HqCAOLdxIpYXcZUPpAGM",
    authDomain: "geyser-74ddf.firebaseapp.com",
    databaseURL: "https://geyser-74ddf.firebaseio.com",
    projectId: "geyser-74ddf",
    storageBucket: "geyser-74ddf.appspot.com",
    messagingSenderId: "1001903322970",
    appId: "1:1001903322970:web:a904b91e99d67b22"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  var db = firebase.firestore();
 




function storeData()
{
var name1 = document.getElementById('textbox2').value;
var surname1 = document.getElementById('textbox3').value;
var address1 = document.getElementById('textbox4').value;
var cellNumber1 = document.getElementById('textbox5').value;
var callBackNumber1 = document.getElementById('textbox6').value;
var clientType1 = document.getElementById('textbox7').value;
var serviceType1 = document.getElementById('textbox8').value;
var reason1= document.getElementById('textbox9').value;


//generating report
var caseID1 = document.getElementById('textbox10').value;
var callerID1 = document.getElementById('textbox11').value;
var incidentDate1 = document.getElementById('textbox12').value;
var caseDescription1 = document.getElementById('textbox16').value;
var caseStatus1 = document.getElementById('textbox17').value;
var plumberID1 = document.getElementById('textbox18').value;
var caseOpenedBy1 = document.getElementById('textbox19').value;







// adds details to the callerDetails table
db.collection("callerDetails").doc(callerID1).set(
{
callerID : callerID1,
name: name1,
surname:surname1,
address:address1,
cellNumber:cellNumber1,
callBackNumber:callBackNumber1,
clientType:clientType1,
serviceType:serviceType1,
reason:reason1


}
)

	
	
// adds details to the caseDetails table in firebase 	
db.collection("caseDetails").doc(caseID1).set(
{
caseID: caseID1,
callerID : callerID1,
incidentDate:incidentDate1,
addressOfIncident :address1,
caseDescription : caseDescription1,
caseStatus : caseStatus1,
plumberID : plumberID1,
caseOpenedBy :caseOpenedBy1,
caseClosedBy : "unknown",
caseClosedDate : "unknown"


}
)


	
	
	
	
	

}
 </script>
</body>
</html>                
