<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="utf-8">

<style> 
input[type=text] 
{
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  box-sizing: border-box;
}
</style>
<script src="https://cdn.anychart.com/releases/8.0.0/js/anychart-base.min.js"></script>
</head>

<body>
<script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.2.4/firebase-app.js"></script>
 <script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/6.0.2/firebase-storage.js"></script>



<button onclick= cases()> View number of cases per month </button>
<div id="chartContainer" style="height: 300px; width: 100%;"></div>
<script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>
<p id = "testing"></p>

<script>

var firebaseConfig = {
    apiKey: "AIzaSyDibg-oYRpVXU9HqCAOLdxIpYXcZUPpAGM",
    authDomain: "geyser-74ddf.firebaseapp.com",
    databaseURL: "https://geyser-74ddf.firebaseio.com",
    projectId: "geyser-74ddf",
    storageBucket: "geyser-74ddf.appspot.com",
    messagingSenderId: "1001903322970",
    appId: "1:1001903322970:web:a904b91e99d67b22"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  var db = firebase.firestore();
  


function cases()
{
	const display=document.querySelector("#testing");
	var end =0
	var start = 0;
	var month = 0;
	
	var one =0;
	var two =0;
	var three =0;
	var four =0;
	var five =0;
	var six =0;
	var seven =0;
	var eight =0;
	var nine =0;
	var ten =0;
	var eleven =0;
	var twelve =0;
	
	var one1 = "1";
	var two1 ="2";
	var three1 ="3";
	var four1 ="4";
	var five1 ="5";
	var six1 ="6";
	var seven1 ="7";
	var eight1 ="8";
	var nine1 ="9";
	var ten1 ="10";
	var eleven1 ="11";
	var twelve1 ="12";
	
	
	db.collection("caseDetails").get().then(function(querySnapshot)
	{
		querySnapshot.forEach(function(doc)
		{
			var m = doc.data().incidentDate;
			var search = m[4];
			
			for(var i =0; i<m.length; i++)
			{
			     if(m[i] == search)
				 {
				   start = i;
				   break;
				 }
			
			}
			for(var j =0; j<m.length; j++)
			{
			     if(m[j] == search)
				 {
				    end = j;
				    
				 }
			
			}
			
			 month = m.slice(start+1, end);
			
			 if(month == one1)
			 {
			    one++;
			 }
			 if(month == two1)
			 {
			    two++;
			 }
			 if(month == three1)
			 {
			    three++;
			 }
			 if(month == four1)
			 {
			    four++;
			 }
			 if(month == five1)
			 {
			    five++;
			 }
			 if(month == six1)
			 {
			    six++;
			 }
			 if(month == seven1)
			 {
			    seven++;
			 }
			 if(month == eight1)
			 {
			    eight++;
			 }
			 if(month == nine1)
			 {
			    nine++;
			 }
			 if(month == ten1)
			 {
			    ten++;
			 }
			 if(month == eleven1)
			 {
			    eleven++;
			 }
			 if(month == twelve1)
			 {
			    twelve++;
			 }
			 
			    
			
	   });
	   var chart = new CanvasJS.Chart("chartContainer", {
	animationEnabled: true,
	theme: "light2", // "light1", "light2", "dark1", "dark2"
	title:{
		text: "Number Of Cases per month"
	},
	axisY: {
		title: "Number of cases"
	},
	data: [{        
		type: "column",  
		showInLegend: true, 
		legendMarkerColor: "grey",
		legendText: "Month",
		dataPoints: [      
			{ y: one, label: "Jan" },
			{ y: two,  label: "Feb" },
			{ y: three,  label: "Mar" },
			{ y: four,  label: "Apr" },
			{ y: five,  label: "May" },
			{ y: six, label: "June" },
			{ y: seven,  label: "July" },
			{ y: eight,  label: "Aug" },
			{ y: nine,  label: "Sept" },
			{ y: ten,  label: "Oct" },
			{ y: eleven,  label: "Nov" },
			{ y: twelve,  label: "Dec" }
		]
	}]
});
chart.render();

	   //alert(seven);
	    
	});
	
	
}
</script>
</body>
</html>